#### SNMP

SNMP (по умол­чанию UDP/161).

Всего в SNMP семь PDU:

- GET — запрос менеджера NMS на получение данных c устройства.  
- GETNEXT — запрос, аналогичный GET. Отличие лишь в том, что менеджер запрашивает данные, находящиеся на следующем уровне иерархии OID, в MIB.  
- SET — с помощью этого запроса менеджер изменяет или присваивает устройству новые данные.  
- RESPONSE — сообщение от агента, высылаемое в ответ на запрос данных.  
- TRAP — уведомление о произошедшем событии или ошибке. Агент отправляет его сразу после наступления события, не дожидаясь запроса менеджера. Менеджер никак не подтверждает получение сообщения, что может стать проблемой.  
- GETBULK — запрос агенту на извлечение с устройства массива данных. Это улучшенный вариант запроса GETNEXT.  
- INFORM — сообщение, аналогичное TRAP, но с подтверждением получения. Агент будет отправлять уведомление, пока менеджер не подтвердит, что оно дошло.  
  
INFORM, GETBULK — есть только во второй и третьей версиях протокола SNMP.


```bash
# Установка snmp
$ sudo apt-get update
$ sudo apt-get install snmpd snmp

# Конфигурация меджера
$ sudo nano /etc/snmp/snmp.conf
      # Закоментировать одну строку
      #mibs :

# Конфигурация агента
$ sudo vi /etc/snmp/snmpd.conf
    # Настройки по умолчанию
    agentAddress udp:127.0.0.1:161
    # Если надо опрашивать host с другого адреса (например с удаленного компа) или порта (нестандартного порта)
    agentAddress udp:192.168.1.100:162

# Перезапуск snmpd
$ sudo service snmpd stop
$ sudo service snmpd start
$ sudo service snmpd status

# Перезапуск агента
$ sudo systemctl restart snmpd
# ...или так
$ sudo service snmpd restart

# Проверка конфигурации SNMP
$ sudo snmpwalk -v 2c -c public localhost

# Пройтись по ветке .1
$ snmpwalk -v 2c -c public localhost .1

# Захват пакетов
$ snmpget -On -v2c -c public localhost 1.3.6.1.2.1.1.7.0 1.3.6.1.2.1.2.2.1.2.6 1.3.6.1.2.1.2.2.1.5.3

```
